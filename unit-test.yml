parameters:
- name: BuildTaskFramework
  type: string

steps:
- task: DotNetCoreCLI@2
  displayName: Build unit tests - ${{ parameters.BuildTaskFramework }}
  inputs:
    command: build
    projects: |
      **/FileShareClientTests.csproj
      **/FileShareAdminClientTests.csproj
    arguments: '--framework ${{ parameters.BuildTaskFramework }} --configuration $(BuildConfiguration) --output $(Build.BinariesDirectory)\unittests\${{ parameters.BuildTaskFramework }} --no-restore'

- task: DotNetCoreCLI@2
  displayName: Run unit tests - ${{ parameters.BuildTaskFramework }}
  inputs:
    command: test
    projects: |
      $(Build.BinariesDirectory)\unittests\net48\FileShareClientTests.dll
      $(Build.BinariesDirectory)\unittests\net48\FileShareAdminClientTests.dll
    testRunTitle: UnitTests_${{ parameters.BuildTaskFramework }}
